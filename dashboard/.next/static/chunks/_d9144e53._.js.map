{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Uswift/dashboard/app/auth/reset-password/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\n\r\nexport default function ResetPasswordPage() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const [token, setToken] = useState<string | null>(null);\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirm, setConfirm] = useState(\"\");\r\n  const [message, setMessage] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const getTokenFromHash = () => {\r\n      try {\r\n        if (typeof window === \"undefined\") return null;\r\n        const hash = window.location.hash; // e.g. #access_token=...&type=recovery\r\n        if (!hash) return null;\r\n        const params = new URLSearchParams(hash.replace(/^#/, \"\"));\r\n        return params.get(\"access_token\") || params.get(\"token\");\r\n      } catch (e) {\r\n        return null;\r\n      }\r\n    };\r\n\r\n    const accessToken =\r\n      searchParams?.get(\"access_token\") || searchParams?.get(\"token\") || getTokenFromHash() || null;\r\n    setToken(accessToken);\r\n  }, [searchParams]);\r\n\r\n  async function handleSubmit(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    setMessage(null);\r\n\r\n    if (!password || password.length < 8) {\r\n      setMessage(\"Password must be at least 8 characters.\");\r\n      return;\r\n    }\r\n    if (password !== confirm) {\r\n      setMessage(\"Passwords do not match.\");\r\n      return;\r\n    }\r\n\r\n    if (!token) {\r\n      setMessage(\"No recovery token found. Request a password reset from the sign-in page.\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || \"\";\r\n      const anonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || \"\";\r\n      if (!supabaseUrl) throw new Error(\"Missing NEXT_PUBLIC_SUPABASE_URL\");\r\n\r\n      const res = await fetch(`${supabaseUrl.replace(/\\/$/, \"\")}/auth/v1/user`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          apikey: anonKey,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ password }),\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const body = await res.json().catch(() => ({}));\r\n        const errMsg = body?.error_description || body?.message || `${res.status} ${res.statusText}`;\r\n        throw new Error(errMsg || \"Failed to reset password\");\r\n      }\r\n\r\n      setMessage(\"Password updated. Redirecting to sign in...\");\r\n      setTimeout(() => router.push(\"/auth/signin\"), 1100);\r\n    } catch (err: any) {\r\n      setMessage(err?.message || \"Unexpected error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <main className=\"max-w-md mx-auto mt-16 p-8 bg-white/95 rounded-xl shadow-lg\">\r\n      <div className=\"mb-6 text-center\">\r\n        <h1 className=\"text-3xl font-extrabold mb-2 text-gray-900\">Reset your password</h1>\r\n        <p className=\"text-sm text-gray-600\">Enter a new password to restore access to your account.</p>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit} className=\"grid gap-4\">\r\n        <label className=\"block\">\r\n          <span className=\"text-sm font-medium text-gray-700\">New password</span>\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            placeholder=\"At least 8 characters\"\r\n            className=\"mt-1 block w-full rounded-lg border border-gray-200 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#14b8a6]\"\r\n            required\r\n          />\r\n        </label>\r\n\r\n        <label className=\"block\">\r\n          <span className=\"text-sm font-medium text-gray-700\">Confirm password</span>\r\n          <input\r\n            type=\"password\"\r\n            value={confirm}\r\n            onChange={(e) => setConfirm(e.target.value)}\r\n            placeholder=\"Repeat your password\"\r\n            className=\"mt-1 block w-full rounded-lg border border-gray-200 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#14b8a6]\"\r\n            required\r\n          />\r\n        </label>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          className=\"mt-2 inline-flex w-full items-center justify-center rounded-lg bg-[#14b8a6] text-white px-4 py-2 font-semibold hover:brightness-95 disabled:opacity-60\"\r\n        >\r\n          {loading ? \"Updating...\" : \"Update password\"}\r\n        </button>\r\n      </form>\r\n\r\n      {message && <div className=\"mt-4 text-center text-[#14b8a6]\">{message}</div>}\r\n\r\n      {!token && (\r\n        <div className=\"mt-4 text-sm text-gray-500\">\r\n          If you opened this page directly, request a password reset from the sign-in page.\r\n        </div>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Uswift/dashboard/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}