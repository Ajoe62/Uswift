(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89],{1702:(e,s,t)=>{"use strict";var a=t(9962);t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},7869:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var a=t(3365),r=t(1521),n=t(1702);function o(){let e=(0,n.useRouter)(),s=(0,n.useSearchParams)(),[t,o]=(0,r.useState)(null),[i,c]=(0,r.useState)(""),[l,u]=(0,r.useState)(""),[d,m]=(0,r.useState)(null),[h,p]=(0,r.useState)(!1);async function x(s){if(s.preventDefault(),m(null),!i||i.length<8)return void m("Password must be at least 8 characters.");if(i!==l)return void m("Passwords do not match.");if(!t)return void m("No recovery token found. Request a password reset from the sign-in page.");p(!0);try{let s="https://sigoorxtktxtbcneodux.supabase.co";if(!s)throw Error("Missing NEXT_PUBLIC_SUPABASE_URL");let a=await fetch(`${s.replace(/\/$/,"")}/auth/v1/user`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNpZ29vcnh0a3R4dGJjbmVvZHV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU0NzMwOTMsImV4cCI6MjA3MTA0OTA5M30.x1e1_9GNoNtQUF4EPYlSAf0HWfrwUzQAuwiWTnMhbN8","Content-Type":"application/json"},body:JSON.stringify({password:i})});if(!a.ok){let e=await a.json().catch(()=>({})),s=e?.error_description||e?.message||`${a.status} ${a.statusText}`;throw Error(s||"Failed to reset password")}m("Password updated. Redirecting to sign in..."),setTimeout(()=>e.push("/auth/signin"),1100)}catch(e){m(e?.message||"Unexpected error")}finally{p(!1)}}return(0,r.useEffect)(()=>{o(s?.get("access_token")||s?.get("token")||(()=>{try{let e=window.location.hash;if(!e)return null;let s=new URLSearchParams(e.replace(/^#/,""));return s.get("access_token")||s.get("token")}catch(e){return null}})()||null)},[s]),(0,a.jsxs)("main",{className:"max-w-md mx-auto mt-16 p-8 bg-white/95 rounded-xl shadow-lg",children:[(0,a.jsxs)("div",{className:"mb-6 text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-extrabold mb-2 text-gray-900",children:"Reset your password"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Enter a new password to restore access to your account."})]}),(0,a.jsxs)("form",{onSubmit:x,className:"grid gap-4",children:[(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"New password"}),(0,a.jsx)("input",{type:"password",value:i,onChange:e=>c(e.target.value),placeholder:"At least 8 characters",className:"mt-1 block w-full rounded-lg border border-gray-200 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-uswift-accent",required:!0})]}),(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Confirm password"}),(0,a.jsx)("input",{type:"password",value:l,onChange:e=>u(e.target.value),placeholder:"Repeat your password",className:"mt-1 block w-full rounded-lg border border-gray-200 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-uswift-accent",required:!0})]}),(0,a.jsx)("button",{type:"submit",disabled:h,className:"mt-2 inline-flex w-full items-center justify-center rounded-lg bg-uswift-accent text-white px-4 py-2 font-semibold hover:brightness-95 disabled:opacity-60",children:h?"Updating...":"Update password"})]}),d&&(0,a.jsx)("div",{className:"mt-4 text-center text-uswift-accent",children:d}),!t&&(0,a.jsx)("div",{className:"mt-4 text-sm text-gray-500",children:"If you opened this page directly, request a password reset from the sign-in page."})]})}function i(){return(0,a.jsxs)("div",{className:"max-w-md mx-auto mt-16 p-8 bg-white/95 rounded-xl shadow-lg animate-pulse",children:[(0,a.jsxs)("div",{className:"mb-6 text-center",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-300 rounded mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mx-auto"})]}),(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsx)("div",{className:"h-12 bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"h-12 bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"h-10 bg-gray-300 rounded"})]})]})}function c(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)(i,{}),children:(0,a.jsx)(o,{})})}},9627:(e,s,t)=>{Promise.resolve().then(t.bind(t,7869))}},e=>{e.O(0,[347,131,358],()=>e(e.s=9627)),_N_E=e.O()}]);